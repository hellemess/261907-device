var btn=document.querySelector(".write-us-btn"),popup=document.querySelector(".write-us"),exit=popup.querySelector(".exit"),nameField=popup.querySelector("#name-field"),form=popup.querySelector("form"),eMailField=popup.querySelector("#e-mail-field"),letterField=popup.querySelector("#letter-field"),nameStorage=localStorage.getItem("nameField"),eMailStorage=localStorage.getItem("eMailField"),map=document.querySelector(".map"),mapPopup=document.querySelector(".map-popup"),mapExit=mapPopup.querySelector(".exit");btn.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("write-us-show"),nameField.focus(),nameStorage?(nameField.value=nameStorage,eMailField.focus(),eMailStorage?(eMailField.value=eMailStorage,letterField.focus()):eMailField.focus()):nameField.focus()}),exit.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("write-us-show"),popup.classList.remove("write-us-error"),nameField.classList.remove("invalid"),eMailField.classList.remove("invalid"),letterField.classList.remove("invalid")}),form.addEventListener("submit",function(e){nameField.value&&eMailField.value&&letterField.value?(localStorage.setItem("nameField",nameField.value),localStorage.setItem("eMailField",eMailField.value)):(e.preventDefault(),popup.classList.remove("write-us-error"),nameField.classList.remove("invalid"),eMailField.classList.remove("invalid"),letterField.classList.remove("invalid"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("write-us-error"),nameField.value||nameField.classList.add("invalid"),eMailField.value||eMailField.classList.add("invalid"),letterField.value||letterField.classList.add("invalid"))}),nameField.addEventListener("focus",function(){nameField.classList.remove("invalid")}),eMailField.addEventListener("focus",function(){eMailField.classList.remove("invalid")}),letterField.addEventListener("focus",function(){letterField.classList.remove("invalid")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(popup.classList.contains("write-us-show")?(popup.classList.remove("write-us-show"),popup.classList.remove("write-us-error"),nameField.classList.remove("invalid"),eMailField.classList.remove("invalid"),letterField.classList.remove("invalid")):mapPopup.classList.contains("map-popup-show")&&mapPopup.classList.remove("map-popup-show"))}),map.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("map-popup-show")}),mapExit.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("map-popup-show")});
